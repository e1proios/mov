<!DOCTYPE html>
<html lang="en">
<style>
  * {
    font-family: sans-serif;
  }
  table, th, td {
    border:1px solid black;
  }
  table {
    width: 90%;
    margin-bottom: 2em;
  }
  th {
    background-color: lightblue;
  }
  th, td {
    padding: 4px 8px;
  }
  .method-name {
    font-family: monospace;
    font-size: 18px;
    color: red;
  }
  pre {
    font-family: monospace;
    background-color: lightgray;
  }
  span.endpoint {
    font-family: monospace;
    white-space: nowrap;
  }
</style>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation</title>
</head>

<body>
  <header>
    <h1>Movie API Documentation</h1>
  </header>
  <main>
    <div>
      <h2>My Flix</h2>

      <p>API provides users access to information about different movies, directors, and genres.</p>

      <p>A user can sign up, update their personal information, and create a list of their favorite movies</p>
    </div>

    <div>
      <h2>Endpoints:</h2>

      <table>
        <tr>
          <th>REQUEST</th>
          <th>URL</th>
          <th>HTTP METHOD</th>
          <th>QUERY PARAMS</th>
          <th>BODY</th>
          <th>RESPONSE</th>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>login</td>

          <td>
            <span class="endpoint">/login</span>
          </td>

          <td class="method-name">POST</td>

          <td></td>

          <td>JSON:
            <code>
<pre>{
  email: string,
  password: string
}</pre>
            </code>
          </td>

          <td>JSON: user data & JWT auth token
            <code>
<pre>{
  "user": {
      "_id": "638635f93107afc10e144e60",
      "name": "Ellen Ripley",
      "password": "$2b$10$g...",
      "email": "ellen.ripley@weyland-yutani.corp",
      "birthday": null,
      "favoriteMovies": [
        "636ff6437475cbe95c6989ca"
      ],
      "__v": 0
  },
  "token": "eyJhbGciOiJIUzI1NiIsInR5cCI6Ik..."
}</pre>
            </code>
          </td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>get all movies</td>

          <td>
            <span class="endpoint">/movies</span>
          </td>

          <td class="method-name">GET</td>

          <td></td>

          <td></td>

          <td>JSON: array of movies</td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>get movie by title</td>

          <td>
            <span class="endpoint">/movies/:title</span>
          </td>

          <td class="method-name">GET</td>

          <td>title: 'Aliens'</td>

          <td></td>

          <td>JSON: movie data
            <code>
<pre>{
  "director": {
    "name": "James Cameron",
    "nationality": "USA",
    "birth": 1954
  },
  "genre": {
    "name": "sci-fi",
    "description": "sci-fi: genre description"
  }
  "_id": "636ff6437475cbe95c6989ca",
  "title": "Aliens",
  "year": 1986,
  "description": "Aliens: movie description",
  "featured": true
}</pre>
            </code>
          </td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>get genre by name</td>

          <td>
            <span class="endpoint">/genres/:name</span>
          </td>

          <td class="method-name">GET</td>

          <td>name: 'sci-fi'</td>

          <td></td>

          <td>JSON: genre data
            <code>
<pre>{
  "name": "sci-fi",
  "description": "sci-fi: genre description"
}</pre>
            </code>
          </td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>get director by name</td>

          <td>
            <span class="endpoint">/directors/:name</span>
          </td>

          <td class="method-name">GET</td>

          <td>name: 'James%20Cameron'</td>

          <td></td>

          <td>JSON: director data
            <code>
<pre>{
  "name": "James Cameron",
  "nationality": "USA",
  "birth": 1954
}</pre>
            </code>
          </td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>get all users</td>

          <td>
            <span class="endpoint">/users</span>
          </td>

          <td class="method-name">GET</td>

          <td></td>

          <td></td>

          <td>JSON: array of users</td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>get user by username (e-mail)</td>

          <td>
            <span class="endpoint">/users/:email</span>
          </td>

          <td class="method-name">GET</td>

          <td>email: 'ellen.ripley@weyland-yutani.corp'</td>

          <td></td>

          <td>JSON: user data
            <code>
<pre>{
  "_id": "638635f93107afc10e144e60",
  "name": "Ellen Ripley",
  "password": "$2b$10$glLPwaQj8wAUDKihDnb7z...",
  "email": "ellen.ripley@weyland-yutani.corp",
  "favoriteMovies": [
    "636ff6437475cbe95c6989d2"
  ],
}</pre>
            </code>
          </td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>register new user</td>

          <td>
            <span class="endpoint">/users</span>
          </td>

          <td class="method-name">POST</td>

          <td></td>

          <td>JSON:
            <code>
<pre>{
  name: string,
  password: string,
  email: string,
  birthday?: Date
}</pre>
            </code>
          </td>

          <td>JSON: created user</td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>update user</td>

          <td>
            <span class="endpoint">/users/:email</span>
          </td>

          <td class="method-name">PUT</td>

          <td>email: 'ellen.ripley@weyland-yutani.corp'</td>

          <td>JSON:
            <code>
<pre>{
  name?: string,
  password?: string,
  birthday?: Date
}</pre>
            </code>
          </td>

          <td>JSON: updated user</td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>add movie to user favorites</td>

          <td>
            <span class="endpoint">/users/:email/favorites</span>
          </td>

          <td class="method-name">PUT</td>

          <td>email: 'ellen.ripley@weyland-yutani.corp'</td>

          <td>JSON:
            <code>
<pre>{
  movieId: '636ff6437475cbe95c6989d2'
}</pre>
            </code>
          </td>

          <td>JSON: updated user</td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>remove movie from user favorites</td>

          <td>
            <span class="endpoint">/users/:email/favorites</span>
          </td>

          <td class="method-name">DELETE</td>

          <td>email: 'ellen.ripley@weyland-yutani.corp'</td>

          <td>JSON:
            <code>
<pre>{
  movieId: '636ff6437475cbe95c6989d2'
}</pre>
            </code>
          </td>

          <td>JSON: updated user</td>
        </tr>

<!----------------------------------------------------------------------------->

        <tr>
          <td>close user account</td>

          <td>
            <span class="endpoint">/users/:email</span>
          </td>

          <td class="method-name">DELETE</td>

          <td>email: 'ellen.ripley@weyland-yutani.corp'</td>

          <td></td>

          <td>success message: 'user: Ellen Ripley was deleted'</td>
        </tr>
      </table>
    </div>
  </main>
</body>
</html>
